# バックアップ

<!-- toc -->

## 自動バックアップ

Ankiはカードデータの自動バックアップを作成します。これにはカードのテキストとスケジューリング情報が含まれますが、音声や画像ファイルは含まれません。

自動バックアップはミスから復旧するのに便利ですが、これだけに頼るべきではありません。自動バックアップはローカルデバイスに保存されるため、デバイスが故障したり盗まれたりした場合には保護されません。[手動バックアップ](#手動colpkgバックアップ)と組み合わせることをお勧めします。

### 復元

自動バックアップから復元するには：

- Ankiを開き、ファイルメニューから「プロファイルを切り替える」を選択します。
- 「バックアップを開く」ボタンをクリックします。
- 復元したいバックアップを選択します。

バックアップから復元すると、バックアップ作成後に行われた変更はすべて失われます。

Ankiはバックアップから復元すると、自動同期とバックアップを無効にします。正しいバックアップを復元できたことを確認したら、Ankiを閉じて再度開いて通常の状態に戻してください。

### 作成

バックアップは定期的に作成されます。バックアップ間隔は[設定](preferences.md)画面で設定できます。デフォルトは30分です。

特定の操作は、設定した時間が経過していなくてもバックアップをトリガーします：

- 一方向同期ダウンロード
- ファイル>インポートで.colpkgファイルをインポート
- ツール>データベースをチェック

バックアップが2日経過すると、Ankiは古いものの一部を削除し始めます。保持したい日次、週次、月次バックアップの数を制御できます。

2.1.50で作成されたバックアップは、古いAnkiバージョンにインポートできません。

## 手動colpkgバックアップ

### 復元

ファイル>インポートを使用して手動バックアップから復元できます。

### 作成

Anki 2.1.50以降では、ファイル>バックアップを作成を使用して即座にバックアップをトリガーできます。これは通常の自動バックアップと同様に機能し、メディアファイルは含まれません。

音声と画像を含むバックアップを作成するには：

- ファイルメニューから「エクスポート」を選択します。
- 「Ankiコレクションパッケージ (.colpkg)」が選択されていることを確認します。
- 「メディアを含める」オプションを有効にします。

これにより、すべてのカードと使用している音声/画像を含む.colpkgファイルが作成されます。このファイルを別のデバイスや、DropboxやGoogle Driveなどのクラウドベースのファイルストレージサービスなど、安全な場所に保存することをお勧めします。

## AnkiWeb

AnkiWebでコレクションを[同期](./syncing.md)することで、デバイスの紛失や盗難に対するある程度の保護が提供されます。AnkiWebからコレクションを復元する必要がある場合は、設定画面で一方向同期を強制するか、新しいデバイスから同期して「ダウンロード」を選択できます。

## 削除ログ

Ankiは削除されたノートをプロファイルフォルダ内のdeleted.txtというテキストファイルに記録します。これらのノートはファイル&gt;インポートで読み込める形式になっていますが、インポート機能は一度に1つのノートタイプしかサポートしていないため、異なるノートタイプから削除されたノートがある場合は、まず各ノートタイプごとに別々のファイルに分割する必要があります。