# メディア

Ankiはノートで使用される音声と画像をコレクションの隣のフォルダに保存します。フォルダの場所については、[ファイルの場所](files.md#ファイルの場所)セクションを参照してください。Anki内でメディアを追加すると、[エディタ](editing.md)のペーパークリップアイコンを使用するか、フィールドに貼り付けることによって、Ankiは元の場所からメディアフォルダにコピーします。これにより、コレクションのメディアのバックアップや別のコンピュータへの移動が簡単になります。

メディアファイル名にスペースやパーセント記号などの特殊文字が含まれている場合、HTMLエディタでのファイル名の表示方法は、ディスク上でのファイル名の表示方法と異なります。例えば、`hello 100%.jpg`というファイルは、HTMLエディタでは`hello%20100%25.jpg`と表示されます。
内部的には、Ankiは依然として元のファイル名を使用しているため、ファイルを[検索](searching.md)したり、[検索と置換](browsing.md#検索と置換)でファイル名を変更したりする場合は、HTMLエディタに表示される名前ではなく、ディスク上に表示される名前を使用する必要があります。テキストファイルへのエクスポートは、基礎となる表現を確認するもう一つの方法です。

## メディアをチェック

ツール&gt;メディアをチェックメニューオプションを使用して、ノートとメディアフォルダをスキャンできます。どのノートでも使用されていないメディアフォルダ内のファイル、およびノートで参照されているがメディアフォルダにないメディアのレポートを生成します。また、次のことができます：

- 未使用のメディアファイルを削除する
- 欠落しているメディアファイルを参照するノートにタグを付ける
- ゴミ箱フォルダを空にする
- 削除されたファイルをメディアフォルダに復元する

このツールは質問や解答のテンプレートをスキャンしないため、テンプレートにフィールドへのメディア参照を配置できません。すべてのカードに静的な画像や音声が必要な場合は、先頭に\_を付けて（例：`_dog.jpg`）名前を付けて、メディアのチェック時にAnkiがそれを無視するようにしてください。未使用のメディアチェックを使用してメディアを削除すると、Ankiはそれをオペレーティングシステムのゴミ箱フォルダに移動するため、削除すべきでないメディアを誤って削除した場合は回復できます。

## 手動でメディアを追加

Ankiのインターフェースを介してメディアを追加すると、Ankiはファイル名が異なるデバイス間で動作するようにエンコードされていることを確認し、特定のオペレーティングシステムで動作しない文字を削除し、非常に長いファイル名を切り詰めます。

[メディアフォルダ](files.md#ファイルの場所)に手動でファイルを追加する場合は、その後ツール&gt;メディアをチェックを使用して、ファイル名が正しくエンコードされていることを確認する必要があります。この手順をスキップすると、互換性のないファイル名は同期時にスキップされます。

Ankiは同期時にメディアフォルダ内のシンボリックリンクをたどりません。フォント、スタイルシート、その他のリソースを含めるためにシンボリックリンクに依存している場合、これらのファイルはデスクトップでは動作するように見えても、モバイルでは失敗する可能性があります。ファイルが適切に同期されるようにするには、シンボリックリンクを使用する代わりに、実際のファイルをcollection.mediaフォルダにコピーしてください。

## サポートされている形式

Ankiは音声とビデオをサポートするために、mpvというプログラム（フォールバックとしてmplayer）を使用しています。さまざまなファイル形式がサポートされていますが、これらの形式のすべてがAnkiWebとモバイルクライアントで動作するわけではありません。MP3音声とMP4ビデオが最も普遍的にサポートされているようです。