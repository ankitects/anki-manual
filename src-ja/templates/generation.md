# カード生成

<!-- toc -->

## 反転カード

[カードの反転に関する動画](http://www.youtube.com/watch?v=DnbKwHEQ1mA&yt:cc=on)をYouTubeでご覧いただけます。

両方向のカードを作成したい場合（例：「ookii」→「big」と「big」→「ookii」の両方）、いくつかの選択肢があります。最も簡単なのは、「基本 (反転カードあり)」組み込みノートタイプを選択することです。これにより、各方向に1枚ずつ、2枚のカードが生成されます。

教材の一部だけに反転カードを生成したい場合（おそらく最も重要な教材だけに反転カードの学習時間を費やしたい、または一部のカードは反転しても意味がない場合）、「基本 (オプション反転カード)」ノートタイプを選択できます。このノートタイプは、最初の2つのフィールドだけを入力すると順方向のみのカードを生成します。「反転を追加」フィールドに何か（「y」など）を追加で入力すると、Ankiは反転カードも生成します。このフィールドの内容はカードに表示されることはありません。

## カードの生成と削除

Ankiは表面が空のカードを作成しません。したがって、「My Field」が空で、あるカードの表テンプレートにそのフィールドだけが含まれていた場合、カードは作成されません。

以前に追加したノートを編集すると、以前は空白だったが空白でなくなった場合、Ankiは自動的に追加カードを作成します。ただし、編集により以前は空白でなかったカードが空白になった場合、Ankiはそれらをすぐに削除しません。これは偶発的なデータ損失につながる可能性があるためです。空のカードを削除するには、メインウィンドウでツール → 空のカードに移動します。空のカードのリストが表示され、削除するオプションが与えられます。

カード生成の仕組みのため、個々のカードを手動で削除することはできません。次回ノートが編集されたときに再作成されてしまうからです。代わりに、関連する条件付き置換フィールドを空にしてから、空のカードオプションを使用する必要があります。

Ankiはカード生成の目的で特殊フィールドや非フィールドテキストを考慮しません。したがって、表テンプレートが次のようになっていて、Countryが空の場合、カードは生成されません：

    {{Country}}は地図上のどこですか？

## 選択的カード生成

時には、セットの最も重要な単語を思い出す能力をテストするなど、教材の一部だけに追加カードを生成したい場合があります。これは、ノートに追加フィールドを追加し、追加カードが必要なノートにテキスト（「1」など）を入力することで実現できます。その後、カードテンプレートで、そのフィールドが空でないことをカードの作成条件にできます。詳細については、以下の条件付き置換のセクションをご覧ください。

## 条件付き置換

フィールドが空または空でない場合にのみ、特定のテキスト、フィールド、またはHTMLをカードに含めることが可能です。例：

    このテキストは常に表示されます。

    {{#FieldName}}
        このテキストはFieldNameにテキストがある場合のみ表示されます
    {{/FieldName}}

    {{^FieldName}}
        このテキストはFieldNameが空の場合のみ表示されます
    {{/FieldName}}

実際の例として、フィールドが空でない場合のみラベルを表示する場合：

    {{#Tags}}
        タグ: {{Tags}}
    {{/Tags}}

または、裏面に追加のメモがある場合に、カードの表面で特定のフィールドを青色で表示したい場合（メモがあるという事実が、答えについてより時間をかけて考えるべきだというリマインダーとして機能する場合）。次のようにフィールドをスタイリングできます：

    {{#Notes}}
        <span style="color:blue;">
    {{/Notes}}

    {{FieldToFormat}}

    {{#Notes}}
        </span>
    {{/Notes}}

条件付き置換を使用して、どのカードが生成されるかを制御することもできます。これは、Ankiが表面が空白になるカードを生成しないために機能します。例えば、表面に2つのフィールドがあるカードを考えてみましょう：

    {{Expression}}
    {{Notes}}

通常、expressionまたはnotesフィールドのいずれかにテキストがある場合、カードが生成されます。expressionが空でない場合のみカードを生成したい場合は、テンプレートを次のように変更できます：

    {{#Expression}}
        {{Expression}}
        {{Notes}}
    {{/Expression}}

両方のフィールドを必要とする場合は、2つの条件付き置換を使用できます：

    {{#Expression}}
        {{#Notes}}
            {{Expression}}
            {{Notes}}
        {{/Notes}}
    {{/Expression}}

条件付き置換コードをカードの_表面_に配置する場合のみ機能することに注意してください。裏面でこれを行うと、単に裏面が空白のカードになってしまいます。同様に、これは表面フィールドが空かどうかをチェックすることで機能するため、条件付き置換で表面「全体」をラップすることが重要です。例えば、次のような場合は期待どおりに機能しません：

    {{#Expression}}
        {{Expression}}
    {{/Expression}}
    {{Notes}}

## 空白の裏面

カード生成はカードの表面のみを見ます。例えば、表テンプレートが：

    {{Field 1}}

裏テンプレートが：

    {{Field 2}}

の場合、Field 1が空でなければカードが生成されます。Field 2が空でも、カードは生成され、裏面が空白になります。

空白の裏面を避けたい場合は、表テンプレートに必須フィールドを条件として配置する必要があります：

    {{#Field 2}}
        {{Field 1}}
    {{/Field 2}}

これにより、Field 2とField 1の両方が空でない場合のみカードが生成されます。

## 空のノートの追加

Ankiで新しいノートを追加するとき、カードテンプレートとノートフィールドが組み合わさってカードが生成されない場合、最初のテンプレートを使用して空白のカードが作成されます。これにより、不完全な教材でも追加でき、後でそれまたはテンプレートを変更して有効にできます。空のノートを保持したくない場合は、空のカード機能で削除できます。

## 穴埋めテンプレート

背景情報については、[穴埋め削除](../editing.md#cloze-deletion)セクションをご覧ください。

穴埋めノートタイプは通常のノートタイプとは異なる動作をします。カスタマイズ可能な数のカードタイプの代わりに、ノート上のすべての穴埋め削除で共有される単一のタイプがあります。

上記のカード生成セクションで述べたように、通常のカードの生成は質問の1つ以上のフィールドが空でないことに依存します。穴埋め削除ノートタイプは異なる方法で生成されます：

- Ankiは表テンプレートで{{cloze:FieldName}}のような1つ以上の穴埋め置換を探します。

- 次に、FieldNameフィールドで{{c1::text}}のようなすべての穴埋め参照を探します。

- 個別の番号ごとに、カードが生成されます。

穴埋め削除カードではカード生成が異なる動作をするため、{{cloze:…​}}タグは通常のノートタイプでは使用できません - 穴埋めノートタイプで使用した場合のみ正しく機能します。

条件付き生成は、どのカードをレンダリングしているかを確認できる特別なフィールドを提供します。例えば、最初の穴埋めに「hint1」フィールドを表示し、2番目の穴埋めに「hint2」フィールドを表示したい場合、次のテンプレートを使用できます：

    {{cloze:Text}}

    {{#c1}}
        {{Hint1}}
    {{/c1}}

    {{#c2}}
        {{Hint2}}
    {{/c2}}