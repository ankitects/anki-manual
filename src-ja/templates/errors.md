# チェックとエラー

<!-- toc -->

ノートタイプへの変更を保存したり、デッキをエクスポートしたりすると、Anki 2.1.45以降は一般的なエラーをチェックします。これらのエラーは、影響を受けるカードを誰かが学習する際に後で問題を引き起こすため、Ankiはそれらを修正する前に進むことを許可しません。

## 基本

続きを読む前に[主要概念](../getting-started.md#主要概念)を参照してください。

以下のエラーのほとんどは、ノートタイプ/カードテンプレートを変更する必要があります。そうするには：

- ブラウザ画面を開き、左側のアイテムを見てください。
- エラーメッセージに記載されているノートタイプを見つけます。必要に応じて左上の検索バーを使用できます。
- ノートタイプをクリックして、右側にそのカード/ノートを表示します。
- 編集エリアの上部にあるカード...ボタンをクリックして、[テンプレート画面](./intro.md#テンプレート画面)を開きます。

## 特定の問題

### テンプレート構文エラー

この種のエラーは、[フィールド置換](./fields.md)構文の誤った使用を示します。

カードテンプレート画面を開いてテンプレートの間違いを修正できます：

- コンピュータ版では、問題のあるカードを編集し、カード...ボタンをクリックします
- AnkiMobileでは、復習画面で問題のあるカードを表示しているときに、歯車をタップし、カードテンプレートを選択します。

間違いを修正すると、そのタイプのすべてのカードが更新されます - テンプレートを使用するすべてのカードに対して同じ変更を行う必要はありません。

何を変更する必要があるかは、受け取っているメッセージによって異なります。

**'{{Field}}'が見つかりましたが、'Field'というフィールドはありません**

これは、テンプレートに存在しないフィールドの名前が含まれていることを示します。問題を修正するには、カードテンプレート内の{{Field}}を見つけて削除します。

**{{Fieldに}}がありません**

このメッセージは、テンプレートに{{が見つかったが、対応する}}がない場合に表示されます。例えば、次のような場合：

```
{{Field
```

これは次のように変更する必要があります：

```
{{Field}}
```

**{{/Field}}がありません**

これは、Ankiがカードテンプレートに`{{#Field}}`または`{{^Field}}`を見つけたが、対応する`{{/Field}}`がないことを意味します。テンプレートから`{{#Field}}`または`{{^Field}}`を削除すると、エラーが修正されます。

**{{/One}}が見つかりましたが、{{/Two}}が期待されていました**

条件付き置換は、開かれた順序と同じ順序で閉じる必要があります。例えば、次のテンプレートは不正です：

```
{{#One}}
  {{#Two}}
    {{Three}}
  {{/One}}
{{/Two}}
```

問題を修正するには、テンプレートを次のように変更する必要があります：

```
{{#One}}
  {{#Two}}
    {{Three}}
  {{/Two}}
{{/One}}
```

**{{/Field}}が見つかりましたが、'{{#Field}}'または'{{^Field}}'がありません**

閉じタグは開きタグと一致する必要があります。例えば、次は無効です。最初に`{{#Two}}`または`{{^Two}}`がないためです：

```
  {{Field}}
{{/Two}}
```

閉じタグを削除することで修正できます：

```
{{Field}}
```

### 同一の表面

各入力に対して2つの同一の質問を作成するようにAnkiが設定されています。これは、新しいカードタイプを追加して調整を行わない場合に発生する可能性があります。同一のカードは作業量を倍増させ、Ankiのスケジューリングの効果を低下させます。

これを修正するには、[テンプレート画面](./intro.md#テンプレート画面)を開き、上部で重複の1つを選択します。次に、右上のボタンを使用して、選択したカードタイプを削除します。これにより、カードタイプを使用していたすべての重複カード/ノートも削除されます。

### カードの表面が空白

<div id="no-field-replacement-on-front-side" />

Ankiは、入力したフィールドを、カードの表面と裏面にどのフィールドが表示されるべきかを示すテンプレートと組み合わせてカードを表示します。カードの表面が空白であるというメッセージを受け取った場合、表面テンプレートに含まれているフィールドのいずれにもテキストがないか、テキストを持つフィールドがあるが、表面テンプレートには含まれていないことを意味します。
この問題を修正するには、コンピュータ版でカードを編集し、**カード...**をクリックして、少なくとも1つのテキストを含むフィールドが表面テンプレートに含まれていることを確認します。
フィールドを追加ボタンで追加フィールドを追加できます。

クローズノートタイプを使用している場合は、テキストフィールドに1つ以上のクローズ削除が含まれていることを確認してください。例：{{c1::いくつかのクローズ削除されたテキスト}}。

答えを入力する機能を使用している場合は、表面にも別のフィールドが含まれていることを確認してください。

### クローズノートタイプにクローズフィルターがない
<div id="no-cloze-filter-on-cloze-notetype" />

クローズノートタイプの表面と裏面のテンプレートには[クローズ](../editing.md#クローズ削除)フィルターが必要です。欠落している場合は、Ankiがクローズカードを正しく作成できるように追加する必要があります。

#### 単一の空のカード

クローズを作成する際、各クローズ番号は別々のカードになります。例えば、次のようにすると3枚のカードが作成されます：

```
{{c1::これ}}は{{c2::サンプル}}{{c3::文}}です。
```

後でテキストを編集し、クローズ番号を削除または変更すると、以前に作成されたカードが空白になる可能性があります。例えば：

```
{{c1::これ}}は{{c2::サンプル}}
```

および

```
{{c1::これ}}は{{c2::サンプル}}{{c1::文}}です。
```

は両方ともカード3を空白にする変更です。カード3を表示すると、カードが空白であることを示すメッセージが表示され、空のカード機能でクリーンアップできます。その機能は、コンピュータ版のメインウィンドウのツールメニューからアクセスでき、空白のカードを削除するために使用できます。報告された空のカードを最初に確認し、疑問がある場合は、続行する前にファイル>エクスポートメニュー項目でバックアップを作成してください。

#### すべてのクローズカードが空

カードテンプレートを誤って変更すると、クローズ削除が表示されなくなる可能性があります。それが起こった場合は、そのような問題のあるカードを1つ編集し、最初のフィールドの名前をメモしてください - 通常は「テキスト」と呼ばれます。その後、次の手順を実行してください：

- カード...ボタンをクリックします
- 表面のテキストを次に置き換えます

  ```
  {{cloze:テキスト}}
  ```

- 裏面のテキストも同じに置き換えます。

フィールドがテキスト以外の名前だった場合は、テキストをフィールドの名前に置き換えてください。